include:
  - component: $CI_SERVER_FQDN/dev-ops/templates/automatisation/ci-cd/pipeline-documentation-jupyterbook@~latest
    inputs:
      documentation_conf_file: "docs/_config.yml"
      documentation_sourcedir: "docs"
      documentation_builddir: "docs/_build/html/"
      documentation_python_requirements: "docs/requirements.txt"

pages:
  stage: documentation
  extends:
    - .documentation:jupyterbook:gitlab-pages
  before_script:
    - apt-get update && apt-get install -y rsync
    - rsync -a notebooks/ docs/
  rules:
    - !reference [.documentation:publish:rules, rules]
    - when: never